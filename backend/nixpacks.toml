[phases.setup]
nixPkgs = ["nodejs", "python311", "python311Packages.pip"]
nixPkgsLibs = ["nodejs", "python311"]

[phases.install]
cmds = [
  "npm install",
  "pip install --no-cache-dir -r requirements.txt"
]

[phases.build]
cmds = ["npx prisma generate", "npm run build"]

[start]
cmd = "npm run start:hybrid"

[variables]
PYTHONPATH = "/app"
PYTHON_SERVICE_URL = "http://localhost:8000"
NODE_ENV = "production"
